{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/editing.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts"],"names":["endEditing","roomContext","dis","dispatch","action","Action","EditEvent","event","timelineRenderingType","FocusSendMessageComposer","context","cancelPreviousPendingEdit","mxClient","editorStateTransfer","previousEdit","getEvent","replacingEvent","status","EventStatus","QUEUED","NOT_SENT","cancelPendingEvent","EMOTE_PREFIX","isMatrixEvent","e","MatrixEvent","async","createMessageContent","message","isHTML","_ref","relation","replyToEvent","permalinkCreator","includeReplyLegacyFallback","editedEvent","isEditing","isReply","Boolean","replyEventId","isReplyAndEditing","isEmote","startsWith","slice","length","body","richToPlain","bodyPrefix","mxEvent","getContent","lines","split","map","l","trim","getTextReplyFallback","formattedBodyPrefix","html","formatted_body","mxReply","DOMParser","parseFromString","querySelector","outerHTML","getHtmlReplyFallback","content","msgtype","MsgType","Emote","Text","isMarkdownEnabled","SettingsStore","getValue","formattedBody","plainToRich","format","_objectSpread","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","includeLegacyFallback","sendMessage","_content","params","_objectWithoutProperties","_excluded","room","roomId","posthogEvent","eventName","inThread","THREAD_RELATION_TYPE","name","PosthogAnalytics","instance","trackEvent","cmd","args","getCommand","threadId","commandSuccessful","runSlashCommand","category","CommandCategories","messages","effects","_content$msgtype$star","_content$msgtype","sendAnyway","shouldSendAnyway","FocusAComposer","decorateStartSendingTime","prom","doMaybeLocalRoomAction","actualRoomId","CHAT_EFFECTS","forEach","effect","containsEmoji","emojis","command","then","resp","sendRoundTripMetric","editMessage","_ref2","getThread","editContent","newContent","createRedactEventDialog","onCloseDialog","response","getRoomId","oldContent","isContentModified","threadRootId"],"mappings":"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","file":"bundles/c94d364295d7008a924e/38.js","sourceRoot":""}