{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/editing.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts"],"names":["endEditing","roomContext","dis","dispatch","action","Action","EditEvent","event","timelineRenderingType","FocusSendMessageComposer","context","cancelPreviousPendingEdit","mxClient","editorStateTransfer","previousEdit","getEvent","replacingEvent","status","EventStatus","QUEUED","NOT_SENT","cancelPendingEvent","async","createMessageContent","message","isHTML","relation","replyToEvent","permalinkCreator","includeReplyLegacyFallback","editedEvent","isEditing","Boolean","isReply","replyEventId","isReplyAndEditing","body","richToPlain","bodyPrefix","mxEvent","getContent","lines","split","map","l","trim","length","startsWith","getTextReplyFallback","formattedBodyPrefix","html","formatted_body","mxReply","DOMParser","parseFromString","querySelector","outerHTML","getHtmlReplyFallback","content","msgtype","MsgType","Text","isMarkdownEnabled","SettingsStore","getValue","formattedBody","plainToRich","format","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","includeLegacyFallback","sendMessage","params","room","roomId","posthogEvent","eventName","inThread","THREAD_RELATION_TYPE","name","PosthogAnalytics","instance","trackEvent","decorateStartSendingTime","threadId","prom","doMaybeLocalRoomAction","actualRoomId","CHAT_EFFECTS","forEach","effect","containsEmoji","emojis","isNotThread","command","then","resp","sendRoundTripMetric","editMessage","getThread","editContent","newContent","createRedactEventDialog","onCloseDialog","response","getRoomId","oldContent","isContentModified","threadRootId"],"mappings":"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","file":"bundles/f951c5491b9e2e16e4eb/36.js","sourceRoot":""}